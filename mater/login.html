<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="xxxxxxxxxxxxxxx ">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>xxxxxxxxxxxxxxx</title>

  <!-- Disable tap highlight on IE -->
  <meta name="msapplication-tap-highlight" content="no">

  <!-- Web Application Manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="xxxxxxxxxxxxxxx">
  <meta name="theme-color" content="#303F9F">

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="xxxxxxxxxxxxxxx">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303F9F">

  <!-- Tile icon for Win8 -->
  <meta name="msapplication-TileColor" content="#3372DF">
  <meta name="msapplication-navbutton-color" content="#303F9F">

  
  <!--Import Google Icon Font-->
  <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/icon?family=Material+Icons">
  <!--Import materialize.css-->
  <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>

  <!-- App Styling -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
<center>
<main>
<div id="frmlogin" class="z-depth-1 grey lighten-4 row" style="display: inline-block; margin: 50px 0 0; padding: 32px 48px 0px 48px; border: 1px solid #EEE;">
    <h5 class="indigo-text">Đăng Nhập</h5>
    <div class="col s12 ">
      <div class="row">
        <div class="input-field col s12">
          <i class="material-icons prefix">email</i>
          <input id="username" type="email" class="validate">
          <label for="username" data-error="Email không hợp lệ...!" >Email</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12">
          <i class="material-icons prefix">lock_outline</i>
          <input id="password" type="password" class="validate">
          <label for="password">Mật khẩu</label>
        </div>
      </div>
       <div class='row'>
        <button type='button' id="btn_login" name='btn_login' class='col s12 btn btn-large waves-effect indigo disabled'>Đăng Nhập</button>
      </div>
    </div>
</div>
</main>

<center>
        

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="js/materialize.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.1.2/firebase.js"></script>
<script>
// Initialize Firebase
var config = {
	apiKey: "AIzaSyDMf01t2L2QUmMeIowNabetjkYKoAKCVgw",
	authDomain: "quan-test-eff9b.firebaseapp.com",
	databaseURL: "https://quan-test-eff9b.firebaseio.com",
	projectId: "quan-test-eff9b",
	storageBucket: "quan-test-eff9b.appspot.com",
	messagingSenderId: "681978952324"
};
firebase.initializeApp(config);
function isEmail(email) {
  var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
  return regex.test(email);
}
if (firebase.auth().currentUser) {
		window.location.href = "index.html";
}
$(document).ready(function(){
	$("#frmlogin #username").on('input',function(e){
		var username = $("#frmlogin #username").val();
		var pass = $("#frmlogin #password").val();
		if(isEmail(username) && pass != "")
		{
			$("#frmlogin #btn_login").removeClass("disabled");
		}
		else
			$("#frmlogin #btn_login").addClass("disabled");
	});
	$("#frmlogin #password").on('input',function(e){
		var username = $("#frmlogin #username").val();
		var pass = $("#frmlogin #password").val();
		if(isEmail(username) && pass != "")
		{
			$("#frmlogin #btn_login").removeClass("disabled");
		}
		else
			$("#frmlogin #btn_login").addClass("disabled");
	});
	$("#frmlogin #btn_login").click(function(){
		var username = $("#frmlogin #username").val();
		var pass = $("#frmlogin #password").val();
		if (!isEmail(username))
		{
			Materialize.toast('Email không hợp lệ!', 2000);
			return;
		}
		if (pass.length < 6)
		{
			Materialize.toast('Pass phải ít nhất 6 ký tự!', 2000);
			return;
		}
		firebase.auth().signInWithEmailAndPassword(username, pass).then(function(){
			//Success full
			window.location.href = "index.html";
			
		}).catch(function(error) {
			// Handle Errors here.
			var errorCode = error.code;
			var errorMessage = error.message;
			Materialize.toast(error.message + "" + errorCode, 2000);
		});
	});
});
</script>
<!--
http://demo.geekslabs.com/materialize-v1.0/form-masks.html
-->

</body>
</html>
